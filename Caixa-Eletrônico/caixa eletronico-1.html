<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caixa Eletrônico</title>
    <link rel="stylesheet" href="caixa.css">
</head>
<body>
    <div class="fundo">
        <div class="caixa">
            <h1>Caixa Eletrônico</h1>
            <p id="resultado"></p>
            <textarea name="talkybox" id="talkybox" cols="30" rows="10"></textarea>
            <table>
                <tr>
                    <td><button id="botao_saldo" class="botao" onclick="ver_saldo(senha())">Saldo</button></td>
                    <td><button class="botao" onclick="ver_extrato()">Extrato</button></td>
                    <td><button id="botao_saque" class="botao" onclick="fazer_saque(senha())">Saque</button></td>
                    <td><button id="botao_deposito" class="botao" onclick="fazer_deposito(senha())">Depósito</button></td>
                </tr>
                <tr>
                    <td><button class="botao" onclick="insert('1')">1</button></td>
                    <td><button class="botao" onclick="insert('2')">2</button></td>
                    <td><button class="botao" onclick="insert('3')">3</button></td>
                    <td><button class="botao" style="color: red;" onclick="clean()">X</button></td>
                </tr>
                <tr>
                    <td><button class="botao" onclick="insert('4')">4</button></td>
                    <td><button class="botao" onclick="insert('5')">5</button></td>
                    <td><button class="botao" onclick="insert('6')">6</button></td>
                    <td><button class="botao" style="color: yellow;" onclick="back()">|</button></td>
                </tr>
                <tr>
                    <td><button class="botao" onclick="insert('7')">7</button></td>
                    <td><button class="botao" onclick="insert('8')">8</button></td>
                    <td><button class="botao" onclick="insert('9')">9</button></td>
                    <td><button class="botao" style="color: green;" onclick="envia_mensagem()" >O</button></td>
                </tr>
                <tr>
                    <td><button class="botao" onclick="insert(',')">,</button></td>
                    <td><button class="botao" onclick="insert('0')">0</button></td>
                    <td><button class="botao" style="color: green;" onclick="envia_mensagem2()">O</button></td>
                    <td><button class="botao" onclick="sair()">Sair</button></td>
                </tr>
            </table>
        </div>
    </div>
    <script>
        
        var saldo = 10000;

        function envia_mensagem()
        {
           var resultado = parseInt(document.getElementById("talkybox").innerHTML);
           if(fazer_deposito){
               document.getElementById("talkybox").innerHTML;
               saldo = saldo + resultado;
               ver_saldo();
           }
        }
        
        function envia_mensagem2()
        {
            var resultado2 = parseInt(document.getElementById("talkybox").innerHTML);
            if(fazer_saque){
               document.getElementById("talkybox").innerHTML;
               saldo = saldo - resultado2;
               ver_saldo();
           }
        }

        function senha()
        {
            var password = parseInt(prompt("Digite sua senha!"));
            if (password == 1234) {
                alert("Senha correta!");
            } else {
                alert("Senha incorreta, digite novamente!");
                senha();
            }
        }

        function ver_saldo()
        {
            var s = document.getElementById("botao_saldo").innerHTML;
            document.getElementById("resultado").innerHTML;
            document.getElementById("resultado").innerHTML = ("Seu saldo atualizado é R$" + saldo);
            
        }

        function fazer_deposito()
        {
            var d = document.getElementById("botao_deposito").innerHTML; 
            var deposito = document.getElementById("resultado").innerHTML = ("Qual o valor para depósito?");
            if(deposito >= 1){
                saldo = saldo + deposito;
                ver_saldo();
            }//else{
                //alert(document.getElementById("resultado").innerHTML = ("Operação não autorizada!"));
            //}
        }

        function fazer_saque()
        {
            var sq = document.getElementById("botao_saque").innerHTML;
            var saque = parseInt(document.getElementById("resultado").innerHTML=("Qual valor para saque?"));
            if(saque){
                saldo = saldo - saque;
            }

            if(saque > saldo){
                alert(document.getElementById("resultado").innerHTML = ("Operação não autorizada!"));

            }
            if(saque <= 0){
                alert(document.getElementById("resultado").innerHTML = ("Operação não autorizada!"));
            }
        }
        
        function ver_extrato()
        {
            alert("EXTRATO \n LionX = +R$10.000,00  Hr 09:46 Date 05/04/22 \n Mercado = -R$300 Hr 14:54 Date 08/04/22 \n Combustível = -R$100 Hr 12:32 Date 09/04/22 \n Shopping = -R$2.150 Hr 16:23 Date 09/04/22")
        }

        function insert(num)
        {
             var numero = document.getElementById("talkybox").innerHTML;
             document.getElementById("talkybox").innerHTML = numero + num;
        }
        
        function clean()
        {
            document.getElementById("resultado").innerHTML = "";
        }
        
        function back()
        {
            var resultado = document.getElementById("talkybox").innerHTML;
            document.getElementById("talkybox").innerHTML = resultado.substring(0, resultado.length -1);
        }
    
        function sair()
        {
			var confirma = confirm('Você deseja sair?');
			if (confirma) {
				window.close();
			}
        }
    
    </script>
</body>
</html>